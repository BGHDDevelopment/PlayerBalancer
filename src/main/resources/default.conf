# LobbyBalancer Configuration (https://www.spigotmc.org/resources/10788/)
# Read the comments, they are a very important part of the configuration
# To get support send me a private message with a description of the problem and the config file
# To easily paste the config file (and other relevant files) use the command /balancer paste
# If the plugin has issues loading the configuration, try putting quotes around text

general {
  # IMPORTANT! Set this to true after configuring the plugin!
  enabled=false

  # When true, the plugin will reload when you execute /greload
  auto-reload=true

  # When true, the plugin will get player counts from RedisBungee
  redis-bungee=false

  # When true, this plugin will print less messages when loading
  silent=false

  # Do not modify this
  version="${project.version}"
}

# Effectively remove (i.e comment) a message to disable it
# Supported variables are shown in the default messages
messages {
  # connecting-server="&aConnecting to a {section} server" # this message is disabled by default!
  connected-server="&aConnected to {server}"
  invalid-input="&cThis is an invalid input type for this command"
  misc-failure="&cCould not find a server to get connected to"
  player-bypass="&cYou have not been moved because you have the playerbalancer.bypass permission"
  player-kicked="&cYou have been kicked from &a{from} &cand you are being moved to &a{to}, reason: &a{reason}"
  same-section="&cYou are already connected to a server on this section!"
  unavailable-server="&cThis command cannot be executed on this server"
  unknown-section="&aCould not find a section with that name"
}

features {
  balancer {
    # Here you have an example of what you can do with the sections
    # The plugin will print out info telling you if your config is right or not
    # If a section does not have a provider it will be inherit from the parent
    # The best way to understand this is to play around with it
    # You can use regex to match a set of servers instead of adding each server
    # You can have as many sections as you want, there is no limit here
    # When connecting to a server in a section, you get redirected

    # Providers you can use:
    # NONE: Returns no server (no one will be able to connect to this section)
    # DIRECT: Returns the only server that is in the list
    # BALANCED: Returns a server between the ones with the least players online
    # LOWEST: Returns the first server found with the least players online
    # RANDOM: Returns a server selected by a RNG algorithm (random)
    # PROGRESSIVE: Returns the first server found that is not full
    # FILLER: Returns the server with the most players online that is not full
    sections {
      auth-lobbies {
        provider=RANDOM
        servers=[
          "Auth1",
          "Auth2",
          "Auth3"
        ]
      }

      general-lobbies {
        parent="auth-lobbies"
        servers=[
          "Lobby1",
          "Lobby2",
          "Lobby3"
        ]
      }

      skywars-lobbies {
        parent="general-lobbies"
        provider=LOWEST
        servers=[
          "SWLobby1",
          "SWLobby2",
          "SWLobby3"
        ]
      }

      skywars-games {
        parent="skywars-lobbies"
        provider=FILLER
        servers=[
          "SW_A1", "SW_A2", "SW_A3", "SW_A4", "SW_A5",
          "SW_B1", "SW_B2", "SW_B3", "SW_B4", "SW_B5"
        ]
        section-server=playskywars
        section-command {
          name=skywars
          permission=""
          aliases=[]
        }
      }
    }

    # The principal section is very important for other features
    # Normally set this to the section that has your main lobbies
    principal-section="general-lobbies"

    # When a player is not in any section, the player will go to the principal section
    # This affects both the fallback command and kick handler features
    fallback-principal=true

    # Dummy sections can have servers from other non-dummy sections
    # When a player connects to a dummy section, nothing will happen
    dummy-sections=[]

    # Reiterative sections remember the server the player connected to previously
    # The plugin will keep connecting the player to that server until he changes
    reiterative-sections=[]
  }

  # Pings servers to see if they are online or not and if they are accessible
  server-checker {
    enabled=true

    # Use either CUSTOM or GENERIC, the first one generally works the best
    tactic=CUSTOM

    # The attempts before giving up on getting a server for a player
    attempts=5

    # The interval between every round of checks
    interval=10000

    # When true, the plugin will print useful info when a server gets checked
    debug-info=false

    # The descriptions that mark a server as non accessible
    marker-descs=[
      "Server is not accessible",
      "Gamemode has already started"
    ]
  }

  # Connects a player to the parent of current section the player is connected to
  fallback-command {
    enabled=true

    # Leave permission empty for no permission
    command {
      name=fallback
      permission=""
      aliases=[
        lobby,
        hub,
        back
      ]
    }

    # Add sections here where you do not want this feature to work
    excluded-sections=[]

    # When true, players will not be able to get connected to sections that are parents of the principal section
    restrictive=true

    # You can override the behavior with rules, overriding the parent section
    # This will set the section to go when you come from the section specified
    rules {
      section-from=section-to
    }
  }

  # Connects a player to other section when kicked
  kick-handler {
    enabled=true

    # When true, the reasons will work as a blacklist instead of a whitelist
    # Blacklist: A player must be kicked with a reason that is NOT in the reasons
    # Whitelist: A player must be kicked with a reason that is in the reasons
    inverted=true

    # The reasons that determine if a player is reconnected or not, supports regex
    reasons=[]

    # When true, players that are kicked while connecting to the proxy will be forced to reconnect to the principal section
    force-principal=false

    # Add sections here where you do not want this feature to work
    excluded-sections=[]

    # When true, players will not be able to get connected to sections that are parents of the principal section
    restrictive=true

    # When true, the plugin will print useful info when a player gets kicked
    debug-info=false

    # You can override the behavior with rules, overriding the parent section
    # This will set the section to go when you come from the section specified
    rules {
      section-from=section-to
    }
  }
}
